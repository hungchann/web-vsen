# name: Run Tests

# TODO: Setup tests in the future
# This workflow will run tests before merging PRs into beta branch
# 
# on:
#   pull_request:
#     branches:
#       - beta
# 
# env:
#   PHP_VERSION: '8.2'
#   NODE_VERSION: '20'
# 
# jobs:
#   test:
#     name: Run Tests
#     runs-on: ubuntu-latest
#     
#     services:
#       postgres:
#         image: postgres:15
#         env:
#           POSTGRES_PASSWORD: postgres
#           POSTGRES_DB: testing
#         options: >-
#           --health-cmd pg_isready
#           --health-interval 10s
#           --health-timeout 5s
#           --health-retries 5
#         ports:
#           - 5432:5432
#       
#       redis:
#         image: redis:alpine
#         options: >-
#           --health-cmd "redis-cli ping"
#           --health-interval 10s
#           --health-timeout 5s
#           --health-retries 5
#         ports:
#           - 6379:6379
# 
#     steps:
#       - name: Checkout code
#         uses: actions/checkout@v4
# 
#       - name: Setup PHP
#         uses: shivammathur/setup-php@v2
#         with:
#           php-version: ${{ env.PHP_VERSION }}
#           extensions: pgsql, redis, mbstring, xml, curl, zip, gd, bcmath, intl
#           coverage: none
# 
#       - name: Setup Node.js
#         uses: actions/setup-node@v4
#         with:
#           node-version: ${{ env.NODE_VERSION }}
#           cache: 'npm'
# 
#       - name: Install PHP dependencies
#         run: composer install --prefer-dist --no-progress --no-interaction
# 
#       - name: Install Node dependencies
#         run: npm ci
# 
#       - name: Run PHPUnit tests
#         env:
#           DB_CONNECTION: pgsql
#           DB_HOST: localhost
#           DB_PORT: 5432
#           DB_DATABASE: testing
#           DB_USERNAME: postgres
#           DB_PASSWORD: postgres
#           REDIS_HOST: localhost
#           REDIS_PORT: 6379
#         run: php artisan test
# 
#       - name: Build assets
#         run: npm run build
